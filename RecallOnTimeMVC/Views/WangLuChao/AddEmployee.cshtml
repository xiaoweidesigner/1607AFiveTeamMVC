
@{
    ViewBag.Title = "AddEmployee";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using RecallOnTimeMVC.Models
@model List<DepartMent>


<script src="~/layui/layui.js"></script>
<script src="~/layui/layui.all.js"></script>
<link href="~/layui/css/layui.css" rel="stylesheet" />
<link href="~/layui/css/layui.mobile.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.3.1.js"></script>
<div>
    <form class="layui-form" action="/WangLuChao/AddEmployees" method="post" enctype="multipart/form-data" id='fm1' lay-filter="example">
        <table>
            <tr>
                <td><label class="layui-form-label">姓名</label></td>
                <td><input type="text" name="E_Name" placeholder="请输入姓名" class="layui-input"></td>
            </tr>
            <tr>
                <td><label class="layui-form-label">部门</label></td>
                <td lay-search="">@Html.DropDownList("D_Name", ViewBag.GId as IEnumerable<SelectListItem>, "直接选择或搜索选择", new Dictionary<string, object> { { "lay-search", "" }, { "lay-verify", "required" } })</td>
            </tr>
            <tr>
                <td>
                    <label class="layui-form-label">账号</label>
                </td>
                <td>
                    <input type="text" name="E_Account" placeholder="请输入账号" class="layui-input">
                </td>
            <tr>
                <td>
                    <label class="layui-form-label">密码</label>
                </td>
                <td>
                    <input type="password" name="E_Pwd" placeholder="请输入密码" class="layui-input">
                </td>
            </tr>
            <tr>
            <tr>
                <td><label class="layui-form-label">图片</label></td>

                <td><input id="File1" type="file" name="E_Img" />@*<img class="layui-upload-img" width="200" height="200" id="demo1" name="E_Img">*@</td>
            </tr>
            <tr>
                <td>
                    <label class="layui-form-label">性别</label>
                </td>
                <td>
                    <input type="radio" name="E_Sex" value="0" title="男" checked="">
                    <input type="radio" name="E_Sex" value="1" title="女">
                </td>
            </tr>
            <tr>
                <td>
                    <label class="layui-form-label">手机</label>
                </td>
                <td>
                    <input type="text" name="E_Phone" placeholder="请输入手机" class="layui-input">
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <input type="submit" class="layui-btn" lay-submit="/WangLuChao/AddEmployees" v-on:click='dataSubmit' value="立即提交" id="gooods" />
                </td>
            </tr>
        </table>
    </form>
</div>
<div class="layui-upload-drag" id="test10" style="float:right">
    <i class="layui-icon"></i>
    <p>点击上传，或将图片拖拽到此处</p>
</div>
<script src="~/layui-v2.4.5/layui/layui.all.js"></script>

<script>
    //$(function ()
    //{
    //    $.ajax({
    //        url: "http://localhost:5646/api/WangLuChao/ShowDepartMent",
    //        dataType: "json",
    //        type: "get",
    //        success: function (data) {
    //            $(data).each(function ()
    //            {
    //                $("#Select1").append("<option value=" + this.DId + ">" + this.D_Name + "</option>");
    //            })
    //        }
    //    })
    //});
    window.onload = function () {
        //Lay脚本Start
        layui.use(['form', 'layedit', 'laydate'], function () {
            var form = layui.form
                , layer = layui.layer
                , layedit = layui.layedit
                , laydate = layui.laydate;
            form.on('submit(demo1)', function (data)
            {
                //解决layui默认只能用from提交，不返回ajax的回调函数问题
                return false;//重点
            });


            //日期
            laydate.render({
                elem: '#date'
            });
            laydate.render({
                elem: '#date1'
            });
            laydate.render({
                elem: '#test5'
                , type: 'datetime'
            });
            //创建一个编辑器
            var editIndex = layedit.build('LAY_demo_editor');

            //监听指定开关
            form.on('switch(switchTest)', function (data) {
                layer.msg('开关checked：' + (this.checked ? 'true' : 'false'), {
                    offset: '6px'
                });
                layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
            });

        })
        //LayUI脚本End

        //Vue 脚本Start
        var vm = new Vue({
            el: '#fm1',
            data: { user: { username: '', userpwd: '', country: 0, isHun: true, sex: 0, fav: [''], myself: '' } },
            created: function () {
                //一般来说这里会发送ajax请求
                this.user = { username: '张三', userpwd: '123', country: 2, isHun: true, sex: 1, fav: ['read', 'write'], myself: '通天塔' };

                //axios发送ajax
                //axios.get('url').then(function(response){
                //成功时回调 response响应的数据 赋值给this.user
                //})catch(function(error){
                //失败时回调 error失败时的错误消息

                //})
            },
            methods: {
                dataSubmit: function () {
                    //axios.post('url',this.user)
                    //.then(fucntion(response){
                    //提交成功回调
                    //})
                    //.catch(function(error){
                    //提交失败回调
                    //})

                    //获取需保存的信息 位于this.user中

                    layer.open({ title: '获取表单数据', content: JSON.stringify(this.user) });

                }
            }
        });
        //Vue 脚本End

    };

    layui.use('upload', function ()
    {
        var $ = layui.jquery
            , upload = layui.upload;

        //拖拽上传
        upload.render({
            elem: '#test10'
            , url: "/WangLuChao/AddEmployees"
            , accept: "employImg"//文件类型
            , auto: false//不自动上传
            , bindAction: '#gooods'//绑定按钮
            , choose: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo1').attr('src', result); //图片链接（base64）
                });
            }
        });
    });
</script>


